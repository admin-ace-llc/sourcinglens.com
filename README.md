# SourcingLens – MVP build

This repository contains a static front-end + Netlify Functions-based backend for the SourcingLens MVP.

## What it includes

- **index.html** – Single-page UI with:
  - Free 1-vs-1 comparison (no HS, no CSV)
  - Starter (1 SKU, 5-country, HS suggestion, CSV, narrative)
  - Pro (up to 5 SKUs, CSV + PDF + risk panel)
  - Pro Monthly section (Supabase-backed auth + saved analyses)
- **styles.css** – Pastel, SaaS-style styling.
- **script.js** – All client-side analysis logic, CSV + PDF helpers.
- **dashboard.js** – Supabase authentication + `analyses` dashboard (email + magic link).
- **netlify/functions/hs-infer.js** – Netlify Function calling OpenAI GPT-4.1-mini to suggest HS codes.
- **privacy.html / terms.html / disclaimer.html** – Legal placeholders.
- **sitemap.xml / robots.txt** – Basic SEO scaffolding.

## Supabase

Project URL and anon key are already embedded in `dashboard.js` as:

- URL: `https://tghihdfufdukqwxhzxpz.supabase.co`
- anon: `…TWvyY`

The `analyses` table should have at least:

```sql
create table if not exists analyses (
  id bigint generated by default as identity primary key,
  user_id uuid not null,
  label text,
  sku_count int,
  estimated_savings numeric,
  payload jsonb,
  created_at timestamp with time zone default now()
);

alter table analyses enable row level security;

create policy "Users can manage their own analyses"
  on analyses
  for all
  using (auth.uid() = user_id)
  with check (auth.uid() = user_id);
```

## Stripe

Buttons in `index.html` have placeholder links:

- Starter: `https://buy.stripe.com/YOUR_STARTER_LINK`
- Pro: `https://buy.stripe.com/YOUR_PRO_LINK`
- Pro Monthly: `https://buy.stripe.com/YOUR_PRO_MONTHLY_LINK`

Replace each with your real Stripe Payment Link URLs.

Recommended **success URLs**:

- Starter/Pro one-off:
  - `https://sourcinglens.com/#starter`
- Pro Monthly:
  - `https://sourcinglens.com/#pro-monthly`

You can gate the Starter/Pro workspace in future by checking a purchase code, but for MVP this build keeps it open with copy nudging users to purchase first.

## Netlify deployment

- **Publish directory**: root (where `index.html` lives)
- **Functions directory**: `netlify/functions`
- **Environment variables**:
  - `OPENAI_API_KEY` – required for HS inference.

Once deployed:

1. Free comparison works out of the box.
2. Starter/Pro use heuristics + HS inference via the `hs-infer` function.
3. Pro Monthly auth + dashboard work as long as Supabase is correctly configured as above.

Always treat outputs as directional only and confirm with your broker / counsel before acting.
